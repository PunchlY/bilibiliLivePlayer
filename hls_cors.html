<!DOCTYPE html>
<html lang='zh-CN' dir='ltr'>

<head>
  <meta charset='utf-8'>
  <title>hls</title>

  <script src='./bilibilisearch.js'></script>
  <script src='./bilibilichat.js'></script>
  <script src='./hlsplay.js'></script>
</head>

<body>
  <div id='search'>
  </div>
  <div id='live'>
    <div id='video'>
      <video id='live_hlsplay' width="100%" autoplay loop muted controls></video>
    </div>
    <div id='chat'>
    </div>
  </div>
</body>

<script>
  function chat(room_id) {
    WebSocketTest(room_id);
  }
  async function play(videosrc) {
    await Hlsoff();
    Hlsplay(document.getElementById('live_hlsplay'), videosrc);
  }
  getJson("https://json2jsonp.com/?callback=cbfunc&url=http://api.bilibili.com/x/web-interface/search/all/v2", "keyword=1");
  function getJson(url, data) {
    var httpRequest = new XMLHttpRequest();
    httpRequest.open('GET', `${url}?${data}`, true);
    httpRequest.send();
    httpRequest.onreadystatechange = function () {
      if (httpRequest.readyState == 4 && httpRequest.status == 200) {
        //console.log(httpRequest.responseText);
        //console.log(JSON.parse(httpRequest.responseText));
      }
    };
  }
</script>

</html>